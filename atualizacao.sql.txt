--versao 0.001--
ALTER TABLE TMOV_CONTA
ADD ID_PARCEIRO BI;

CREATE TABLE TORDEM_SERVICO (
    ID_ORDEM BI NOT NULL,
    ID_PARCEIRO BI,
    TIPO_OS "IN",
    SITUACAO_OS "IN",
    DATA_ENTRADA DAT,
    HORA_ENTRADA HOR,
    DATA_SAIDA DAT,
    HORA_SAIDA HOR,
    MARCA S60,
    MODELO S60,
    SERIE S60,
    PROBLEMA S1024,
    OBS S1024,
    SUBTOTAL V2,
    DESCONTO V2,
    ACRESCIMO V2,
    TOTAL V2,
    TOTAL_PRODUTOS V2,
    TOTAL_SERVICOS V2);

ALTER TABLE TORDEM_SERVICO
ADD CONSTRAINT PK_TORDEM_SERVICO
PRIMARY KEY (ID_ORDEM);

CREATE SEQUENCE GEN_TORDEM_SERVICO_ID;

CREATE TABLE TOS_ITEM (
    ID_OS BI NOT NULL,
    ID_ITEM "IN" NOT NULL,
    COD_ITEM S14,
    QNT V2,
    VL_UNIT V2,
    TOTAL V2,
    DESCONTO V2,
    TIPO_ITEM S1);

ALTER TABLE TOS_ITEM
ADD FUNCIONARIO S20;

INSERT INTO TGRUPOS (ID_GRUPO, NOME)
             VALUES (4, 'Servicos');

CREATE TABLE TTIPO_OS (
    ID_TIPO    "IN" NOT NULL /* "IN" = INTEGER */,
    DESCRICAO  S60 NOT NULL /* S60 = VARCHAR(60) */
);

ALTER TABLE TTIPO_OS ADD CONSTRAINT PK_TTIPO_OS PRIMARY KEY (ID_TIPO);


INSERT INTO TTIPO_OS (ID_TIPO, DESCRICAO)
              VALUES (1, 'Normal');
INSERT INTO TTIPO_OS (ID_TIPO, DESCRICAO)
              VALUES (2, 'Garantia');

CREATE TABLE TOS_PAGAMENTO (
    ID "IN" NOT NULL,
    ID_OS "IN",
    ID_FINALIZADORA "IN",
    VALOR V2);

ALTER TABLE TOS_PAGAMENTO
ADD CONSTRAINT PK_TOS_PAGAMENTO
PRIMARY KEY (ID);

CREATE SEQUENCE GEN_TOS_PAGAMENTO_ID;

ALTER TABLE TPRODUTOS
ADD PONTOS_RETIRA "IN";

ALTER TABLE TPRODUTOS
ADD PONTOS_VALIDOS "IN";







