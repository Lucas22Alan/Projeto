<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="relMovOsUsuario_sub" language="groovy" pageWidth="555" pageHeight="802" columnWidth="555" leftMargin="0" rightMargin="0" topMargin="0" bottomMargin="0" uuid="1d91a671-2af5-485f-aa56-f261ffed5af1">
	<property name="ireport.zoom" value="1.0"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<parameter name="fun" class="java.lang.String"/>
	<parameter name="inicio" class="java.util.Date"/>
	<parameter name="final" class="java.util.Date"/>
	<queryString>
		<![CDATA[select  tp.nomelongo ,
        ti.cod_item,
        sum(ti.qnt) as qnt,
        sum(ti.total) as total
 from tos_item ti
 join tordem_servico ts on ti.id_os=ts.id_ordem
 join tbarras tb on ti.cod_item=tb.codigo_barras
 join tprodutos tp on tb.id_produto=tp.id
 where ti.funcionario=$P{fun} and ts.data_saida between $P{inicio} and $P{final}
group by 1,2]]>
	</queryString>
	<field name="NOMELONGO" class="java.lang.String"/>
	<field name="COD_ITEM" class="java.lang.String"/>
	<field name="QNT" class="java.math.BigDecimal"/>
	<field name="TOTAL" class="java.math.BigDecimal"/>
	<variable name="totalreg" class="java.lang.Double" calculation="Sum">
		<variableExpression><![CDATA[$F{TOTAL}]]></variableExpression>
	</variable>
	<columnHeader>
		<band height="25" splitType="Stretch">
			<staticText>
				<reportElement x="0" y="0" width="43" height="19" uuid="0c556472-0f53-4bc5-8a19-f51e52cbce82"/>
				<textElement>
					<font fontName="Arial Narrow" size="12" isBold="true"/>
				</textElement>
				<text><![CDATA[Codigo]]></text>
			</staticText>
			<staticText>
				<reportElement x="287" y="-1" width="63" height="20" uuid="0362e8b6-7a4c-4d70-b1b9-5293c0578d73"/>
				<textElement>
					<font fontName="Arial Narrow" size="12" isBold="true"/>
				</textElement>
				<text><![CDATA[Quantidade]]></text>
			</staticText>
			<staticText>
				<reportElement x="466" y="-1" width="57" height="19" uuid="a1ad5680-6857-4aca-85d9-b511c13f731e"/>
				<textElement textAlignment="Right">
					<font fontName="Arial Narrow" size="12" isBold="true"/>
				</textElement>
				<text><![CDATA[TOTAL]]></text>
			</staticText>
			<staticText>
				<reportElement x="107" y="0" width="80" height="19" uuid="ce5fcb87-614d-43b2-9c48-0db2e5c3ee1a"/>
				<textElement>
					<font fontName="Arial Narrow" size="12" isBold="true"/>
				</textElement>
				<text><![CDATA[Descricao]]></text>
			</staticText>
			<staticText>
				<reportElement x="377" y="0" width="43" height="19" uuid="e297a724-6370-4faf-aeee-b9f5c6dc7365"/>
				<textElement>
					<font fontName="Arial Narrow" size="12" isBold="true"/>
				</textElement>
				<text><![CDATA[Unidade]]></text>
			</staticText>
		</band>
	</columnHeader>
	<detail>
		<band height="25" splitType="Stretch">
			<textField>
				<reportElement x="0" y="0" width="56" height="20" uuid="0885b248-b7c5-482c-8de6-b1243d73dfcd"/>
				<textElement>
					<font fontName="Arial Narrow" size="12"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{COD_ITEM}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00">
				<reportElement x="287" y="0" width="63" height="20" uuid="325e9a6d-56fb-4a03-8c35-6336cb841d1a"/>
				<textElement textAlignment="Center">
					<font fontName="Arial Narrow" size="12"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{QNT}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00">
				<reportElement x="438" y="0" width="85" height="20" uuid="85950d73-0d09-40af-b11f-dbfa80af6a56"/>
				<textElement textAlignment="Right">
					<font fontName="Arial Narrow" size="12"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{TOTAL}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="107" y="0" width="166" height="20" uuid="552e55cb-0620-4bea-bcca-f3e4ff3dfaf5"/>
				<textElement>
					<font fontName="Arial Narrow" size="12"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{NOMELONGO}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<summary>
		<band height="22">
			<staticText>
				<reportElement x="350" y="0" width="63" height="20" uuid="7f47287c-056c-45c9-b4ce-b44cfb6e0c80"/>
				<textElement>
					<font fontName="Arial Narrow" size="12" isBold="true"/>
				</textElement>
				<text><![CDATA[Total Geral:]]></text>
			</staticText>
			<textField pattern="#,##0.00">
				<reportElement x="423" y="0" width="100" height="20" uuid="b2e3df1f-60df-4f3b-b1af-045aa8ca39c4"/>
				<textElement textAlignment="Right">
					<font fontName="Arial Narrow" size="12" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{totalreg}]]></textFieldExpression>
			</textField>
		</band>
	</summary>
</jasperReport>
