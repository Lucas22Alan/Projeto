/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package titulos;

import DAO.ContasReceberDAO;
import DAO.listaDAO;
import model.CadContasRecPagar;
import classes.clsaux;
import com.sun.glass.events.KeyEvent;
import conexoes.conexao;
import grafic.interfac.CRUDTitulo;
import grafic.interfac.pesquisa.formProcuraCliente;
import java.awt.event.ActionEvent;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.text.SimpleDateFormat;
import java.util.Calendar;

import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.AbstractAction;
import javax.swing.DefaultComboBoxModel;
import javax.swing.InputMap;
import javax.swing.JOptionPane;
import javax.swing.JPanel;
import javax.swing.KeyStroke;

/**
 *
 * @author Rodrigo
 */
public class FormContasPagarReceber extends javax.swing.JDialog {

    /**
     * Creates new form FormContasPagarReceber
     */
    public FormContasPagarReceber(java.awt.Frame parent, boolean modal) {
        super(parent, modal);
        initComponents();
        this.inicializa();
    }
  
    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        jPanel1 = new javax.swing.JPanel();
        jPanel2 = new javax.swing.JPanel();
        jLabel1 = new javax.swing.JLabel();
        txtNmro = new javax.swing.JTextField();
        jLabel2 = new javax.swing.JLabel();
        JcbTipo = new javax.swing.JComboBox<>();
        jLabel3 = new javax.swing.JLabel();
        txtId = new javax.swing.JTextField();
        jLabel4 = new javax.swing.JLabel();
        txtarceiro = new javax.swing.JTextField();
        JtxtNomeParceiro = new javax.swing.JTextField();
        jLabel5 = new javax.swing.JLabel();
        JcbEstado = new javax.swing.JComboBox<>();
        jLabel6 = new javax.swing.JLabel();
        jLabel7 = new javax.swing.JLabel();
        jLabel8 = new javax.swing.JLabel();
        JftfEmissao = new javax.swing.JFormattedTextField();
        JftfVencimento = new javax.swing.JFormattedTextField();
        JtxtParcela = new javax.swing.JFormattedTextField();
        jLabel22 = new javax.swing.JLabel();
        txtBoleto = new javax.swing.JTextField();
        jPanel3 = new javax.swing.JPanel();
        jLabel9 = new javax.swing.JLabel();
        jLabel10 = new javax.swing.JLabel();
        jLabel11 = new javax.swing.JLabel();
        jLabel12 = new javax.swing.JLabel();
        jLabel13 = new javax.swing.JLabel();
        JcbTipTitulo = new javax.swing.JComboBox<>();
        JcbBanco = new javax.swing.JComboBox<>();
        JcbVendedor = new javax.swing.JComboBox<>();
        JcbConta = new javax.swing.JComboBox<>();
        cbTipo = new javax.swing.JComboBox<>();
        jLabel17 = new javax.swing.JLabel();
        cbSubTipo = new javax.swing.JComboBox<>();
        jPanel4 = new javax.swing.JPanel();
        jLabel14 = new javax.swing.JLabel();
        jLabel15 = new javax.swing.JLabel();
        jTextField7 = new javax.swing.JTextField();
        jFormattedTextField3 = new javax.swing.JFormattedTextField();
        jPanel5 = new javax.swing.JPanel();
        jLabel16 = new javax.swing.JLabel();
        jLabel18 = new javax.swing.JLabel();
        jLabel19 = new javax.swing.JLabel();
        jLabel20 = new javax.swing.JLabel();
        jLabel21 = new javax.swing.JLabel();
        JtxtValor = new javax.swing.JTextField();
        JtxtJuros = new javax.swing.JTextField();
        JtxtDesconto = new javax.swing.JTextField();
        JtxtFinan = new javax.swing.JTextField();
        JtxtSaldo = new javax.swing.JTextField();
        jPanel6 = new javax.swing.JPanel();
        jButton2 = new javax.swing.JButton();
        btnGravar = new javax.swing.JButton();
        jPanel8 = new javax.swing.JPanel();
        jPanel7 = new javax.swing.JPanel();
        jScrollPane1 = new javax.swing.JScrollPane();
        txtObs = new javax.swing.JTextPane();

        setDefaultCloseOperation(javax.swing.WindowConstants.DISPOSE_ON_CLOSE);
        setTitle("Cadastro de Titulos");

        jPanel1.setBackground(new java.awt.Color(255, 255, 255));

        jPanel2.setBackground(new java.awt.Color(219, 227, 227));
        jPanel2.setBorder(javax.swing.BorderFactory.createTitledBorder(javax.swing.BorderFactory.createBevelBorder(javax.swing.border.BevelBorder.RAISED), "Documento", javax.swing.border.TitledBorder.DEFAULT_JUSTIFICATION, javax.swing.border.TitledBorder.DEFAULT_POSITION, new java.awt.Font("Tahoma", 0, 11), new java.awt.Color(0, 153, 102))); // NOI18N

        jLabel1.setText("Nº:");

        txtNmro.setFont(new java.awt.Font("Segoe UI Semilight", 0, 12)); // NOI18N
        txtNmro.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                txtNmroActionPerformed(evt);
            }
        });

        jLabel2.setText("Tipo :");

        JcbTipo.setFont(new java.awt.Font("Segoe UI Semibold", 0, 12)); // NOI18N
        JcbTipo.setModel(new javax.swing.DefaultComboBoxModel<>(new String[] { "2-  A Receber", "1-  A Pagar" }));
        JcbTipo.setEnabled(false);
        JcbTipo.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                JcbTipoActionPerformed(evt);
            }
        });

        jLabel3.setText("Sequência :");

        txtId.setEditable(false);
        txtId.setFont(new java.awt.Font("Segoe UI Semilight", 0, 12)); // NOI18N
        txtId.setText("000");

        jLabel4.setText("Parceiro :");

        txtarceiro.setFont(new java.awt.Font("Segoe UI Semilight", 0, 12)); // NOI18N
        txtarceiro.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusLost(java.awt.event.FocusEvent evt) {
                txtarceiroFocusLost(evt);
            }
        });
        txtarceiro.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                txtarceiroActionPerformed(evt);
            }
        });

        JtxtNomeParceiro.setFont(new java.awt.Font("Segoe UI Semilight", 0, 12)); // NOI18N

        jLabel5.setText("Estado :");

        JcbEstado.setFont(new java.awt.Font("Segoe UI Semibold", 0, 12)); // NOI18N
        JcbEstado.setModel(new javax.swing.DefaultComboBoxModel<>(new String[] { "Pendente", "Quitado" }));

        jLabel6.setText("Parcela :");

        jLabel7.setText("Emissão :");

        jLabel8.setText("Vencimento :");

        try {
            JftfEmissao.setFormatterFactory(new javax.swing.text.DefaultFormatterFactory(new javax.swing.text.MaskFormatter("##/##/####")));
        } catch (java.text.ParseException ex) {
            ex.printStackTrace();
        }
        JftfEmissao.setFont(new java.awt.Font("Segoe UI Semilight", 0, 12)); // NOI18N
        JftfEmissao.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                JftfEmissaoActionPerformed(evt);
            }
        });

        try {
            JftfVencimento.setFormatterFactory(new javax.swing.text.DefaultFormatterFactory(new javax.swing.text.MaskFormatter("##/##/####")));
        } catch (java.text.ParseException ex) {
            ex.printStackTrace();
        }
        JftfVencimento.setFont(new java.awt.Font("Segoe UI Semilight", 0, 12)); // NOI18N
        JftfVencimento.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                JftfVencimentoActionPerformed(evt);
            }
        });

        try {
            JtxtParcela.setFormatterFactory(new javax.swing.text.DefaultFormatterFactory(new javax.swing.text.MaskFormatter("##-##")));
        } catch (java.text.ParseException ex) {
            ex.printStackTrace();
        }
        JtxtParcela.setText("01-01");
        JtxtParcela.setToolTipText("");
        JtxtParcela.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                JtxtParcelaActionPerformed(evt);
            }
        });

        jLabel22.setFont(new java.awt.Font("Tahoma", 0, 12)); // NOI18N
        jLabel22.setText("Boleto:");

        txtBoleto.setEditable(false);
        txtBoleto.setFont(new java.awt.Font("Tahoma", 0, 12)); // NOI18N

        javax.swing.GroupLayout jPanel2Layout = new javax.swing.GroupLayout(jPanel2);
        jPanel2.setLayout(jPanel2Layout);
        jPanel2Layout.setHorizontalGroup(
            jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel2Layout.createSequentialGroup()
                .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(jPanel2Layout.createSequentialGroup()
                        .addGap(3, 3, 3)
                        .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(jLabel1, javax.swing.GroupLayout.Alignment.TRAILING)
                            .addComponent(jLabel4, javax.swing.GroupLayout.Alignment.TRAILING)
                            .addComponent(jLabel6, javax.swing.GroupLayout.Alignment.TRAILING)))
                    .addGroup(jPanel2Layout.createSequentialGroup()
                        .addContainerGap()
                        .addComponent(jLabel22)))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(jPanel2Layout.createSequentialGroup()
                        .addComponent(txtarceiro, javax.swing.GroupLayout.PREFERRED_SIZE, 50, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                        .addComponent(JtxtNomeParceiro, javax.swing.GroupLayout.PREFERRED_SIZE, 374, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addContainerGap(21, Short.MAX_VALUE))
                    .addGroup(jPanel2Layout.createSequentialGroup()
                        .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(jPanel2Layout.createSequentialGroup()
                                .addComponent(txtNmro)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addComponent(jLabel2)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addComponent(JcbTipo, javax.swing.GroupLayout.PREFERRED_SIZE, 109, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addComponent(jLabel3)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                                .addComponent(txtId, javax.swing.GroupLayout.PREFERRED_SIZE, 80, javax.swing.GroupLayout.PREFERRED_SIZE))
                            .addGroup(jPanel2Layout.createSequentialGroup()
                                .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                                    .addComponent(txtBoleto)
                                    .addComponent(JtxtParcela, javax.swing.GroupLayout.DEFAULT_SIZE, 50, Short.MAX_VALUE))
                                .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                    .addGroup(jPanel2Layout.createSequentialGroup()
                                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                                        .addComponent(jLabel5, javax.swing.GroupLayout.PREFERRED_SIZE, 46, javax.swing.GroupLayout.PREFERRED_SIZE)
                                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                        .addComponent(JcbEstado, 0, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                                        .addGap(18, 18, 18)
                                        .addComponent(jLabel7))
                                    .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel2Layout.createSequentialGroup()
                                        .addGap(234, 234, 234)
                                        .addComponent(jLabel8)))
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                                .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                                    .addComponent(JftfVencimento, javax.swing.GroupLayout.Alignment.TRAILING)
                                    .addComponent(JftfEmissao, javax.swing.GroupLayout.Alignment.TRAILING, javax.swing.GroupLayout.DEFAULT_SIZE, 79, Short.MAX_VALUE))))
                        .addGap(10, 10, 10))))
        );
        jPanel2Layout.setVerticalGroup(
            jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel2Layout.createSequentialGroup()
                .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel1)
                    .addComponent(txtNmro, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabel2)
                    .addComponent(JcbTipo, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabel3)
                    .addComponent(txtId, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel4)
                    .addComponent(txtarceiro, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(JtxtNomeParceiro, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel6)
                    .addComponent(jLabel7)
                    .addComponent(JftfEmissao, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabel5)
                    .addComponent(JcbEstado, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(JtxtParcela, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(JftfVencimento, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabel8)
                    .addComponent(jLabel22)
                    .addComponent(txtBoleto, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(17, 17, 17))
        );

        jPanel3.setBackground(new java.awt.Color(219, 227, 227));
        jPanel3.setBorder(javax.swing.BorderFactory.createTitledBorder(javax.swing.BorderFactory.createBevelBorder(javax.swing.border.BevelBorder.RAISED), "Financeiro", javax.swing.border.TitledBorder.DEFAULT_JUSTIFICATION, javax.swing.border.TitledBorder.DEFAULT_POSITION, new java.awt.Font("Tahoma", 0, 11), new java.awt.Color(0, 153, 102))); // NOI18N

        jLabel9.setFont(new java.awt.Font("Arial", 0, 12)); // NOI18N
        jLabel9.setText("Tipo Titulo:");

        jLabel10.setFont(new java.awt.Font("Arial", 0, 12)); // NOI18N
        jLabel10.setText("Banco:");

        jLabel11.setFont(new java.awt.Font("Arial", 0, 12)); // NOI18N
        jLabel11.setText("Vendedor:");

        jLabel12.setFont(new java.awt.Font("Arial", 0, 12)); // NOI18N
        jLabel12.setText("Conta:");

        jLabel13.setFont(new java.awt.Font("Arial", 0, 12)); // NOI18N
        jLabel13.setText("Tipo:");

        JcbTipTitulo.setFont(new java.awt.Font("Segoe UI Semibold", 0, 12)); // NOI18N

        JcbBanco.setFont(new java.awt.Font("Segoe UI Semibold", 0, 12)); // NOI18N

        JcbVendedor.setFont(new java.awt.Font("Segoe UI Semibold", 0, 12)); // NOI18N

        JcbConta.setFont(new java.awt.Font("Segoe UI Semibold", 0, 12)); // NOI18N

        cbTipo.setFont(new java.awt.Font("Segoe UI Semibold", 0, 12)); // NOI18N
        cbTipo.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                cbTipoActionPerformed(evt);
            }
        });

        jLabel17.setFont(new java.awt.Font("Arial", 0, 12)); // NOI18N
        jLabel17.setText("Sub Tipo:");

        cbSubTipo.setFont(new java.awt.Font("Segoe UI Semibold", 0, 12)); // NOI18N

        javax.swing.GroupLayout jPanel3Layout = new javax.swing.GroupLayout(jPanel3);
        jPanel3.setLayout(jPanel3Layout);
        jPanel3Layout.setHorizontalGroup(
            jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel3Layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                    .addComponent(jLabel12)
                    .addComponent(jLabel11, javax.swing.GroupLayout.PREFERRED_SIZE, 60, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabel10)
                    .addComponent(jLabel9)
                    .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                        .addComponent(jLabel13, javax.swing.GroupLayout.PREFERRED_SIZE, 52, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addComponent(jLabel17)))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                    .addComponent(JcbTipTitulo, 0, 386, Short.MAX_VALUE)
                    .addComponent(JcbBanco, 0, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(JcbVendedor, 0, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(JcbConta, 0, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(cbTipo, 0, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(cbSubTipo, 0, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );
        jPanel3Layout.setVerticalGroup(
            jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel3Layout.createSequentialGroup()
                .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel9)
                    .addComponent(JcbTipTitulo, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel10)
                    .addComponent(JcbBanco, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(JcbVendedor, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabel11))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel12)
                    .addComponent(JcbConta, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(cbTipo, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabel13))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel17)
                    .addComponent(cbSubTipo, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)))
        );

        jPanel4.setBackground(new java.awt.Color(219, 227, 227));
        jPanel4.setBorder(javax.swing.BorderFactory.createTitledBorder(javax.swing.BorderFactory.createBevelBorder(javax.swing.border.BevelBorder.RAISED), "Pagamentos", javax.swing.border.TitledBorder.DEFAULT_JUSTIFICATION, javax.swing.border.TitledBorder.DEFAULT_POSITION, new java.awt.Font("Tahoma", 0, 11), new java.awt.Color(0, 153, 102))); // NOI18N

        jLabel14.setText("Data:");

        jLabel15.setText("Valor:");

        jTextField7.setFont(new java.awt.Font("Segoe UI Semilight", 0, 12)); // NOI18N
        jTextField7.setEnabled(false);

        try {
            jFormattedTextField3.setFormatterFactory(new javax.swing.text.DefaultFormatterFactory(new javax.swing.text.MaskFormatter("##/##/####")));
        } catch (java.text.ParseException ex) {
            ex.printStackTrace();
        }
        jFormattedTextField3.setEnabled(false);
        jFormattedTextField3.setFont(new java.awt.Font("Segoe UI Semilight", 0, 12)); // NOI18N

        javax.swing.GroupLayout jPanel4Layout = new javax.swing.GroupLayout(jPanel4);
        jPanel4.setLayout(jPanel4Layout);
        jPanel4Layout.setHorizontalGroup(
            jPanel4Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel4Layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(jPanel4Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(jLabel15)
                    .addComponent(jLabel14))
                .addGap(24, 24, 24)
                .addGroup(jPanel4Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                    .addComponent(jTextField7)
                    .addComponent(jFormattedTextField3, javax.swing.GroupLayout.DEFAULT_SIZE, 77, Short.MAX_VALUE))
                .addContainerGap(202, Short.MAX_VALUE))
        );
        jPanel4Layout.setVerticalGroup(
            jPanel4Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel4Layout.createSequentialGroup()
                .addGroup(jPanel4Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel14)
                    .addComponent(jFormattedTextField3, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(jPanel4Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel15)
                    .addComponent(jTextField7, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)))
        );

        jPanel5.setBackground(new java.awt.Color(219, 227, 227));
        jPanel5.setBorder(javax.swing.BorderFactory.createTitledBorder(javax.swing.BorderFactory.createBevelBorder(javax.swing.border.BevelBorder.RAISED), "Valores", javax.swing.border.TitledBorder.DEFAULT_JUSTIFICATION, javax.swing.border.TitledBorder.DEFAULT_POSITION, new java.awt.Font("Tahoma", 0, 11), new java.awt.Color(0, 153, 102))); // NOI18N

        jLabel16.setText("Valor:");

        jLabel18.setText("Juros");

        jLabel19.setText("Desc.:");

        jLabel20.setText("Finan.:");

        jLabel21.setText("Saldo:");

        JtxtValor.setFont(new java.awt.Font("Segoe UI Semilight", 0, 12)); // NOI18N
        JtxtValor.setText("0,00");
        JtxtValor.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusLost(java.awt.event.FocusEvent evt) {
                JtxtValorFocusLost(evt);
            }
        });
        JtxtValor.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                JtxtValorActionPerformed(evt);
            }
        });

        JtxtJuros.setFont(new java.awt.Font("Segoe UI Semilight", 0, 12)); // NOI18N
        JtxtJuros.setText("0,00");
        JtxtJuros.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusLost(java.awt.event.FocusEvent evt) {
                JtxtJurosFocusLost(evt);
            }
        });

        JtxtDesconto.setFont(new java.awt.Font("Segoe UI Semilight", 0, 12)); // NOI18N
        JtxtDesconto.setText("0,00");
        JtxtDesconto.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusLost(java.awt.event.FocusEvent evt) {
                JtxtDescontoFocusLost(evt);
            }
        });

        JtxtFinan.setFont(new java.awt.Font("Segoe UI Semilight", 0, 12)); // NOI18N
        JtxtFinan.setText("0,00");

        JtxtSaldo.setFont(new java.awt.Font("Segoe UI Semilight", 0, 12)); // NOI18N
        JtxtSaldo.setText("0,00");
        JtxtSaldo.setEnabled(false);

        javax.swing.GroupLayout jPanel5Layout = new javax.swing.GroupLayout(jPanel5);
        jPanel5.setLayout(jPanel5Layout);
        jPanel5Layout.setHorizontalGroup(
            jPanel5Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel5Layout.createSequentialGroup()
                .addGroup(jPanel5Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(jLabel16, javax.swing.GroupLayout.Alignment.TRAILING)
                    .addComponent(jLabel18, javax.swing.GroupLayout.Alignment.TRAILING)
                    .addComponent(jLabel19, javax.swing.GroupLayout.Alignment.TRAILING)
                    .addComponent(jLabel20, javax.swing.GroupLayout.Alignment.TRAILING)
                    .addComponent(jLabel21, javax.swing.GroupLayout.Alignment.TRAILING))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(jPanel5Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(JtxtValor)
                    .addComponent(JtxtJuros)
                    .addComponent(JtxtDesconto)
                    .addComponent(JtxtSaldo)
                    .addComponent(JtxtFinan))
                .addGap(10, 10, 10))
        );
        jPanel5Layout.setVerticalGroup(
            jPanel5Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel5Layout.createSequentialGroup()
                .addGroup(jPanel5Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel16)
                    .addComponent(JtxtValor, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(jPanel5Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel18)
                    .addComponent(JtxtJuros, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addGroup(jPanel5Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel19)
                    .addComponent(JtxtDesconto, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(8, 8, 8)
                .addGroup(jPanel5Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel20)
                    .addComponent(JtxtFinan, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addGroup(jPanel5Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel21)
                    .addComponent(JtxtSaldo, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addContainerGap())
        );

        jPanel6.setBackground(new java.awt.Color(145, 182, 182));
        jPanel6.setBorder(javax.swing.BorderFactory.createLineBorder(new java.awt.Color(0, 153, 102)));

        jButton2.setFont(new java.awt.Font("Arial", 1, 12)); // NOI18N
        jButton2.setIcon(new javax.swing.ImageIcon(getClass().getResource("/imagens/Cancela.png"))); // NOI18N
        jButton2.setText("Cancelar");
        jButton2.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton2ActionPerformed(evt);
            }
        });

        btnGravar.setFont(new java.awt.Font("Arial", 1, 12)); // NOI18N
        btnGravar.setIcon(new javax.swing.ImageIcon(getClass().getResource("/imagens/Confirma.png"))); // NOI18N
        btnGravar.setText("Gravar");
        btnGravar.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnGravarActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout jPanel6Layout = new javax.swing.GroupLayout(jPanel6);
        jPanel6.setLayout(jPanel6Layout);
        jPanel6Layout.setHorizontalGroup(
            jPanel6Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel6Layout.createSequentialGroup()
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addComponent(jButton2)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addComponent(btnGravar)
                .addGap(20, 20, 20))
        );
        jPanel6Layout.setVerticalGroup(
            jPanel6Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel6Layout.createSequentialGroup()
                .addContainerGap(18, Short.MAX_VALUE)
                .addGroup(jPanel6Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(btnGravar)
                    .addComponent(jButton2))
                .addContainerGap())
        );

        jPanel6Layout.linkSize(javax.swing.SwingConstants.VERTICAL, new java.awt.Component[] {btnGravar, jButton2});

        jPanel8.setBackground(new java.awt.Color(145, 182, 182));
        jPanel8.setBorder(javax.swing.BorderFactory.createLineBorder(new java.awt.Color(0, 153, 102)));

        javax.swing.GroupLayout jPanel8Layout = new javax.swing.GroupLayout(jPanel8);
        jPanel8.setLayout(jPanel8Layout);
        jPanel8Layout.setHorizontalGroup(
            jPanel8Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 0, Short.MAX_VALUE)
        );
        jPanel8Layout.setVerticalGroup(
            jPanel8Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 15, Short.MAX_VALUE)
        );

        jPanel7.setBackground(new java.awt.Color(219, 227, 227));
        jPanel7.setBorder(javax.swing.BorderFactory.createTitledBorder(javax.swing.BorderFactory.createBevelBorder(javax.swing.border.BevelBorder.RAISED), "Observação", javax.swing.border.TitledBorder.DEFAULT_JUSTIFICATION, javax.swing.border.TitledBorder.DEFAULT_POSITION, new java.awt.Font("Tahoma", 0, 11), new java.awt.Color(0, 153, 102))); // NOI18N

        jScrollPane1.setViewportView(txtObs);

        javax.swing.GroupLayout jPanel7Layout = new javax.swing.GroupLayout(jPanel7);
        jPanel7.setLayout(jPanel7Layout);
        jPanel7Layout.setHorizontalGroup(
            jPanel7Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jScrollPane1, javax.swing.GroupLayout.Alignment.TRAILING)
        );
        jPanel7Layout.setVerticalGroup(
            jPanel7Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jScrollPane1)
        );

        javax.swing.GroupLayout jPanel1Layout = new javax.swing.GroupLayout(jPanel1);
        jPanel1.setLayout(jPanel1Layout);
        jPanel1Layout.setHorizontalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel1Layout.createSequentialGroup()
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                    .addComponent(jPanel6, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addGroup(javax.swing.GroupLayout.Alignment.LEADING, jPanel1Layout.createSequentialGroup()
                        .addContainerGap()
                        .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(jPanel3, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel1Layout.createSequentialGroup()
                                .addGap(0, 0, Short.MAX_VALUE)
                                .addComponent(jPanel2, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                            .addGroup(jPanel1Layout.createSequentialGroup()
                                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                                    .addComponent(jPanel4, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                                    .addComponent(jPanel7, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                                .addComponent(jPanel5, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))))
                    .addComponent(jPanel8, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                .addContainerGap())
        );
        jPanel1Layout.setVerticalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel1Layout.createSequentialGroup()
                .addComponent(jPanel8, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(jPanel2, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(10, 10, 10)
                .addComponent(jPanel3, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                    .addComponent(jPanel5, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addGroup(jPanel1Layout.createSequentialGroup()
                        .addComponent(jPanel4, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(jPanel7, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(jPanel6, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(jPanel1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addComponent(jPanel1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(0, 55, Short.MAX_VALUE))
        );

        setSize(new java.awt.Dimension(579, 740));
        setLocationRelativeTo(null);
    }// </editor-fold>//GEN-END:initComponents

    private void JcbTipoActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_JcbTipoActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_JcbTipoActionPerformed

    private void jButton2ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButton2ActionPerformed
        this.dispose();
    }//GEN-LAST:event_jButton2ActionPerformed

    private void btnGravarActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnGravarActionPerformed
        if(validaCampoObrigatorios()==false){
            
        }else{

            String idtitulo=txtId.getText();
            if (idtitulo.equals("000")){
                this.pegaDadosInserir();
            }else{
                this.pegaDadosAlterar();
            }
        }
    }//GEN-LAST:event_btnGravarActionPerformed

    private void txtarceiroActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_txtarceiroActionPerformed
       this.pesquisaClient(Integer.parseInt(txtarceiro.getText()));
    }//GEN-LAST:event_txtarceiroActionPerformed

    private void txtarceiroFocusLost(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_txtarceiroFocusLost
        if(txtarceiro.getText().length()>0){
            this.pesquisaClient(Integer.parseInt(txtarceiro.getText()));
        }
    }//GEN-LAST:event_txtarceiroFocusLost

    private void JtxtValorFocusLost(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_JtxtValorFocusLost
       this.calculaValores();
    }//GEN-LAST:event_JtxtValorFocusLost

    private void JtxtJurosFocusLost(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_JtxtJurosFocusLost
        this.calculaValores();
    }//GEN-LAST:event_JtxtJurosFocusLost

    private void JtxtDescontoFocusLost(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_JtxtDescontoFocusLost
        this.calculaValores();
    }//GEN-LAST:event_JtxtDescontoFocusLost

    private void cbTipoActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_cbTipoActionPerformed
        String tp=clsaux.retornaId(cbTipo.getSelectedItem().toString());
        DefaultComboBoxModel cbsub= new DefaultComboBoxModel(listaDAO.listasubgrup(tp).toArray());
        cbSubTipo.setModel(cbsub);
    }//GEN-LAST:event_cbTipoActionPerformed

    private void txtNmroActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_txtNmroActionPerformed
       txtarceiro.requestFocus();
    }//GEN-LAST:event_txtNmroActionPerformed

    private void JftfEmissaoActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_JftfEmissaoActionPerformed
       JftfVencimento.requestFocus();
        
    }//GEN-LAST:event_JftfEmissaoActionPerformed

    private void JftfVencimentoActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_JftfVencimentoActionPerformed
        JtxtValor.requestFocus();
        JtxtValor.selectAll();
    }//GEN-LAST:event_JftfVencimentoActionPerformed

    private void JtxtValorActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_JtxtValorActionPerformed
       btnGravar.requestFocus();
    }//GEN-LAST:event_JtxtValorActionPerformed

    private void JtxtParcelaActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_JtxtParcelaActionPerformed
       JftfEmissao.requestFocus();
    }//GEN-LAST:event_JtxtParcelaActionPerformed
    public void pegaDadosInserir(){
        CadContasRecPagar clsccpp = new CadContasRecPagar();
        ContasReceberDAO crDAO = new ContasReceberDAO();
        String tipo=JcbTipo.getSelectedItem().toString();
        clsccpp.setTipo_titulo(clsaux.retornaId(JcbTipTitulo.getSelectedItem().toString()));
        Boolean temBoleto=crDAO.verificaConfigBoleto(clsccpp.getTipo_titulo());
        clsccpp.setTipo(clsaux.retornaId(JcbTipo.getSelectedItem().toString()));
        String indicadorparcela=JtxtParcela.getText();
        int parcelaatual=Integer.parseInt(clsaux.retornaId(indicadorparcela));
        int totalparcela=Integer.parseInt(clsaux.retornaAposId(indicadorparcela));
        java.sql.Date datavenc=clsaux.retornaData(JftfVencimento.getText().toString());
        for (parcelaatual=parcelaatual; parcelaatual<=totalparcela; parcelaatual++){
                clsccpp.setNumero(txtNmro.getText());
                clsccpp.setParceiro(txtarceiro.getText());
                clsccpp.setParcela(JtxtParcela.getText());
                clsccpp.setEmisao(clsaux.retornaData(JftfEmissao.getText().toString()));
                clsccpp.setVencimento(datavenc);
                clsccpp.setBanco(clsaux.retornaId(JcbBanco.getSelectedItem().toString()));
                clsccpp.setVendedor(clsaux.retornaId(JcbVendedor.getSelectedItem().toString()));
                clsccpp.setConta(clsaux.retornaId(JcbConta.getSelectedItem().toString()));
                clsccpp.setHistorico("1");
                clsccpp.setTipofinanceiro(clsaux.retornaId(cbTipo.getSelectedItem().toString()));
                clsccpp.setSubtipofinanceiro(clsaux.retornaId(cbSubTipo.getSelectedItem().toString()));
                clsccpp.setValor(JtxtValor.getText().toString().replaceAll(",", "."));
                clsccpp.setJuros(JtxtJuros.getText().toString().replaceAll(",", "."));
                clsccpp.setDesconto(JtxtDesconto.getText().toString().replaceAll(",", "."));
                clsccpp.setSaldo(JtxtSaldo.getText().toString().replaceAll(",", "."));
                clsccpp.setFinan(JtxtFinan.getText().toString().replaceAll(",", "."));
                clsccpp.setParcela(String.valueOf(parcelaatual));
                clsccpp.setTipo(clsaux.retornaId(JcbTipo.getSelectedItem().toString()));
                clsccpp.setEstadotitulo(clsaux.retornaId(JcbEstado.getSelectedItem().toString()));
                clsccpp.setObservacao(txtObs.getText());
                clsccpp.setQntParcelas(String.valueOf(totalparcela));
                if(temBoleto==true&&clsccpp.getTipo().equals("2")){
                    clsccpp.setNumboleto(String.valueOf(crDAO.retornaUltimoBoleto(clsccpp.getTipo_titulo())));
                }else{
                    clsccpp.setNumboleto("0");
                }
                crDAO.inserir(clsccpp);
                Calendar cl = Calendar.getInstance();
                SimpleDateFormat ft = new SimpleDateFormat("dd/MM/yyyy");
                cl.setTime(datavenc);
                cl.add(Calendar.MONTH, 1);
                datavenc=clsaux.retornaData(ft.format(cl.getTime()));
                }
        this.dispose();
    }
    public void pegaDadosAlterar(){
        CadContasRecPagar cp = new CadContasRecPagar();
        ContasReceberDAO crDAO= new ContasReceberDAO();
        cp.setNumero(txtNmro.getText());
        cp.setIdmovto(txtId.getText());
        cp.setParceiro(txtarceiro.getText());
        cp.setTipo(clsaux.retornaId(JcbTipo.getSelectedItem().toString()));
        cp.setEstadotitulo(clsaux.retornaId(JcbEstado.getSelectedItem().toString()));
        cp.setEmisao(clsaux.retornaData(JftfEmissao.getText()));
        cp.setVencimento(clsaux.retornaData(JftfVencimento.getText()));
        cp.setTipo_titulo(clsaux.retornaId(JcbTipTitulo.getSelectedItem().toString()));
        cp.setBanco(clsaux.retornaId(JcbBanco.getSelectedItem().toString()));
        cp.setVendedor(clsaux.retornaId(JcbVendedor.getSelectedItem().toString()));
        cp.setConta(clsaux.retornaId(JcbConta.getSelectedItem().toString()));
        cp.setTipofinanceiro(clsaux.retornaId(cbTipo.getSelectedItem().toString()));
        cp.setSubtipofinanceiro(clsaux.retornaId(cbSubTipo.getSelectedItem().toString()));
        cp.setHistorico("10");
        cp.setValor(JtxtValor.getText().replace(",", "."));
        cp.setJuros(JtxtJuros.getText().replace(",", "."));
        cp.setDesconto(JtxtDesconto.getText().replace(",", "."));
        cp.setSaldo(JtxtSaldo.getText().replace(",", "."));
        cp.setObservacao(txtObs.getText());
        
        crDAO.alterar(cp);
        this.dispose();
    }
    public void calculaValores(){
        Double valor,juros,desconto,saldo=0.00;
        valor=Double.parseDouble(JtxtValor.getText().replaceAll(",", "."));
        juros=Double.parseDouble(JtxtJuros.getText().replaceAll(",", "."));
        desconto=Double.parseDouble(JtxtDesconto.getText().replaceAll(",", "."));
        saldo=valor+juros-desconto;
        JtxtSaldo.setText(clsaux.formato(saldo));
    }
    public void inicializa(){
        String direcao=null;
        DefaultComboBoxModel cbtiptitulo= new DefaultComboBoxModel(ContasReceberDAO.tipoTitulo().toArray());
        JcbTipTitulo.setModel(cbtiptitulo);
        JcbTipTitulo.setSelectedItem("4- A prazo");
        DefaultComboBoxModel cbbanco= new DefaultComboBoxModel(ContasReceberDAO.banco().toArray());
        JcbBanco.setModel(cbbanco);
        DefaultComboBoxModel cbvendedor= new DefaultComboBoxModel(ContasReceberDAO.vendedor().toArray());
        JcbVendedor.setModel(cbvendedor);
        DefaultComboBoxModel cbconta= new DefaultComboBoxModel(ContasReceberDAO.conta().toArray());
        JcbConta.setModel(cbconta);
        if (CRUDTitulo.tipo=="Cadastro de Contas a Pagar"||CRUDTitulo.tipo=="S"){
            JcbTipo.setSelectedItem("1-  A Pagar");
        }else {
            JcbTipo.setSelectedItem("2-  A Receber");
        }
        if (clsaux.retornaId(JcbTipo.getSelectedItem().toString()).equals("2")){
           direcao="E"; 
        }else{
            direcao="S";
        }
        DefaultComboBoxModel cbtipo= new DefaultComboBoxModel(listaDAO.listatipo(direcao).toArray());
        cbTipo.setModel(cbtipo);
        DefaultComboBoxModel cbsub= new DefaultComboBoxModel(listaDAO.listasubgrup(clsaux.retornaId
                                                            (cbTipo.getSelectedItem().toString())).toArray());
        cbSubTipo.setModel(cbsub);
        DefaultComboBoxModel cbestado= new DefaultComboBoxModel (ContasReceberDAO.estadoTitulo().toArray());
        JcbEstado.setModel(cbestado);
        DefaultComboBoxModel cbsubtipo= new DefaultComboBoxModel(listaDAO.listasubgrup("1").toArray());
        InputMap imp= this.getRootPane().getInputMap(JPanel.WHEN_IN_FOCUSED_WINDOW);
        imp.put(KeyStroke.getKeyStroke(KeyEvent.VK_F10,0),"busca");
        this.getRootPane().setInputMap(JPanel.WHEN_IN_FOCUSED_WINDOW, imp);
        this.getRootPane().getActionMap().put("busca", new AbstractAction(){
            public void actionPerformed(ActionEvent ev){
                formProcuraCliente dialo = new formProcuraCliente(new javax.swing.JFrame(), true);
                formProcuraCliente.idform="3";
                dialo.setVisible(true);
            }
        });
        JftfEmissao.setText(clsaux.preencheData());
        JftfVencimento.setText(clsaux.calcularData(30, clsaux.retornaData(clsaux.preencheData())));
        txtNmro.requestFocus();
        
    }
    public void pesquisaClient(int id){
        try {
        String sql="select razao_social from tparceiros where idparceiro='"+id+"'";
        PreparedStatement pspesq=conexao.getPreparedStatementResult(sql);
        ResultSet rspesq;
           rspesq = pspesq.executeQuery();
           rspesq.first();
           String nome=rspesq.getString(1);
           JtxtNomeParceiro.setText(nome);
           rspesq.close();
           pspesq.close();
        } catch (SQLException ex) {
            Logger.getLogger(FormContasPagarReceber.class.getName()).log(Level.SEVERE, null, ex);
            JOptionPane.showMessageDialog(null, "Erro ao buscar nome do parceiro :( \n" +ex.getMessage());
        }
       JtxtParcela.requestFocus();
    }
    public void alterarContaReceber(CadContasRecPagar ccr){
        txtarceiro.setText(ccr.getParceiro());
        JftfEmissao.setText(clsaux.convertDataExib(ccr.getEmisao().toString()));
        JftfVencimento.setText(clsaux.convertDataExib(ccr.getVencimento().toString()));
        JtxtValor.setText(clsaux.formato(Double.parseDouble(ccr.getValor())));
        JcbTipTitulo.setSelectedItem(ccr.getTipo_titulo());
        JcbConta.setSelectedItem(ccr.getConta());
        cbTipo.setSelectedItem(ccr.getHistorico());
        txtId.setText(ccr.getIdmovto());
        JtxtJuros.setText(ccr.getJuros().replace(".", ","));
        JtxtDesconto.setText(ccr.getDesconto().replace(".", ","));
        JtxtSaldo.setText(ccr.getSaldo().replace(".", ","));
        txtObs.setText(ccr.getObservacao());
        cbTipo.setSelectedItem(ccr.getTipofinanceiro());
        cbSubTipo.setSelectedItem(ccr.getSubtipofinanceiro());
        txtNmro.setText(ccr.getNumero());
        clsaux.carregaComboBox(JcbEstado, ccr.getEstadotitulo());
        String parcela=String.format("%02d", Integer.parseInt(ccr.getParcela()));
        String totalparcelas=String.format("%02d", Integer.parseInt(ccr.getQntParcelas()));
        JtxtParcela.setText(  parcela+"-"+totalparcelas);
        if(ccr.getTipo().equals("2")){
            JcbTipo.setSelectedIndex(0);
        }else {
            JcbTipo.setSelectedIndex(1);
        }
        this.pesquisaClient(Integer.parseInt(txtarceiro.getText()));
        JtxtValor.requestFocus();
        
    }
    public boolean validaCampoObrigatorios(){
        Boolean ret=true;
       if(clsaux.verificaNulo(JtxtSaldo.getText())==true||JtxtSaldo.getText().equals("0,00")||JtxtSaldo.getText().equals("0.00")){
            JOptionPane.showMessageDialog(null, "Valor Incorreto!!!");
            ret=false;
       }
       if(clsaux.retornaData(JftfEmissao.getText())==null){
           JOptionPane.showMessageDialog(null, "Data Emissão Incorreta!!!");
           ret=false;
           
       }
       if(clsaux.retornaData(JftfVencimento.getText())==null){
           JOptionPane.showMessageDialog(null, "Data Vencimento Incorreta!!!");
           ret=false;
       }
       return ret;
    }
    
    /**
     * @param args the command line arguments
     */
    
    public static void main(String args[]) {
        /* Set the Nimbus look and feel */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
         * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html 
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(FormContasPagarReceber.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(FormContasPagarReceber.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(FormContasPagarReceber.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(FormContasPagarReceber.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>

        /* Create and display the dialog */
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                FormContasPagarReceber dialog = new FormContasPagarReceber(new javax.swing.JFrame(), true);
                dialog.addWindowListener(new java.awt.event.WindowAdapter() {
                    @Override
                    public void windowClosing(java.awt.event.WindowEvent e) {
                        System.exit(0);
                    }
                });
                dialog.setVisible(true);
            }
        });
    }

    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JComboBox<String> JcbBanco;
    private javax.swing.JComboBox<String> JcbConta;
    private javax.swing.JComboBox<String> JcbEstado;
    private javax.swing.JComboBox<String> JcbTipTitulo;
    private javax.swing.JComboBox<String> JcbTipo;
    private javax.swing.JComboBox<String> JcbVendedor;
    private javax.swing.JFormattedTextField JftfEmissao;
    private javax.swing.JFormattedTextField JftfVencimento;
    private javax.swing.JTextField JtxtDesconto;
    private javax.swing.JTextField JtxtFinan;
    private javax.swing.JTextField JtxtJuros;
    private javax.swing.JTextField JtxtNomeParceiro;
    private javax.swing.JFormattedTextField JtxtParcela;
    private javax.swing.JTextField JtxtSaldo;
    private javax.swing.JTextField JtxtValor;
    private javax.swing.JButton btnGravar;
    private javax.swing.JComboBox<String> cbSubTipo;
    private javax.swing.JComboBox<String> cbTipo;
    private javax.swing.JButton jButton2;
    private javax.swing.JFormattedTextField jFormattedTextField3;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel10;
    private javax.swing.JLabel jLabel11;
    private javax.swing.JLabel jLabel12;
    private javax.swing.JLabel jLabel13;
    private javax.swing.JLabel jLabel14;
    private javax.swing.JLabel jLabel15;
    private javax.swing.JLabel jLabel16;
    private javax.swing.JLabel jLabel17;
    private javax.swing.JLabel jLabel18;
    private javax.swing.JLabel jLabel19;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JLabel jLabel20;
    private javax.swing.JLabel jLabel21;
    private javax.swing.JLabel jLabel22;
    private javax.swing.JLabel jLabel3;
    private javax.swing.JLabel jLabel4;
    private javax.swing.JLabel jLabel5;
    private javax.swing.JLabel jLabel6;
    private javax.swing.JLabel jLabel7;
    private javax.swing.JLabel jLabel8;
    private javax.swing.JLabel jLabel9;
    private javax.swing.JPanel jPanel1;
    private javax.swing.JPanel jPanel2;
    private javax.swing.JPanel jPanel3;
    private javax.swing.JPanel jPanel4;
    private javax.swing.JPanel jPanel5;
    private javax.swing.JPanel jPanel6;
    private javax.swing.JPanel jPanel7;
    private javax.swing.JPanel jPanel8;
    private javax.swing.JScrollPane jScrollPane1;
    private javax.swing.JTextField jTextField7;
    private javax.swing.JTextField txtBoleto;
    private javax.swing.JTextField txtId;
    private javax.swing.JTextField txtNmro;
    private javax.swing.JTextPane txtObs;
    public static javax.swing.JTextField txtarceiro;
    // End of variables declaration//GEN-END:variables
}
